<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <style>
        .chart-card {height : 350px;}
        #lineChart{width : 100%; height : 100%}
    </style>
</head>
<body>
<div class = 'container'>

    <h2>시애틀 날씨 DF, 기술통계</h2>
    <div class = 'row g-4'>
        
        <div class = 'col-lg-6'>
            <h4>DataFrame 상위 5행</h4>
            {{head_html | safe}}
        </div>
        
        <div class = 'col-lg-12'>   
            {% comment %} col-lg-12로 숫자 키우면 넓게 나온대 {% endcomment %}
            <div class = 'card chart-card'>
                <h4>월별 평균 최고 기운</h4>
                <div id='lineChart'></div>
            </div>
        </div>

    </div>
</div>
<br/>
<a href = '{% url 'index' %}' class = 'btn btn-outline-secondary'>메인으로</a>
{% comment %} Echarts 적용 {% endcomment %}

<script src='https://cdn.jsdelivr.net/npm/echarts@6.0.0/dist/echarts.min.js'></script>
<script>
    const labels = {{labels_json | safe}};
    const series = {{series_json | safe}};

    const el = document.getElementById('lineChart')
    const chart = echarts.init(el)

    const option = {
        tooltip : {trigger : 'axis'},
        grid : {left:48, right : 16, top : 24, bottom : 40},
        {% comment %} //범주형 x축 labels를 라렐(fkfpf?)로 사용 {% endcomment %}
        xAxis : {type : 'category', data : labels, axisLabel : {interval : 'auto'}},
        {% comment %} //숫자형 y축 - 온도 {% endcomment %}
        yAxis : {type : 'value', name : 'C'},
        series : [{name : '월평균 최고기온', type : 'line', smooth : true, symbolSize : 4, data : series}]
    };
    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());    //반응열 
</script>

</body>
</html>
